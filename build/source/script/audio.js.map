{"version":3,"sources":["../../../source/scripts/audio-dev.js"],"names":["initAP","hasCoreFeaturesSupport","showErrorMsg","hasAppearanceIusses","showWarningMsg","trackTitle","document","querySelector","el","expandTracksBtn","marqueeEl","addEventListener","trackList","minDisplay","miniDisplay","style","display","parentNode","classList","add","remove","Modernizr","audio","json","svg","csscalc","flexbox","canvas","cssanimations","bgsizecover","objectfit","offsetWidth","scrollWidth","runTime","startTime","start","window","setInterval","width","clearInterval","stop","setTimeout","clearTimeout","str","warningMsg","hideTime","delayTime","innerHTML","iconStr","titleStr","bodyStr","splash","main","errorMsg","icon","title","body","ready","fn","attachEvent","readyState","spectrumDisplay","captionDisplay"],"mappings":"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","file":"audio.js","sourcesContent":["/*\n * Audio Player\n *\n * @author: Ethan Lin\n * @url: https://github.com/oel-mediateam/audioplayer\n * @version: 2.0.0\n *\n * @license: The MIT License (MIT)\n * Copyright (c) 2014 - 2018 Media Serivces\n *\n */\n \n /**** ON DOM READY ****/\n\n( function ready( fn ) {\n    \n    if ( document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading' ) {\n        \n        fn();\n        \n    } else {\n        \n        document.addEventListener( 'DOMContentLoaded', fn );\n        \n    }\n    \n} )( initAP );\n\nlet el = {\n    splash: '#ap-splash',\n    main: '#ap-main',\n    trackTitle: '.track-info .title-wrapper .title',\n    miniDisplay: '.track-list .minimized-display',\n    trackList: '.track-list .tracks',\n    expandTracksBtn: '.track-list .expand-btn',\n    spectrumDisplay: '.body .spectrum',\n    captionDisplay: '.body .caption',\n    warningMsg: '.body .warning-msg',\n    errorMsg: '#ap-error'\n}\n\nfunction initAP() {\n    \n    if ( hasCoreFeaturesSupport() ) {\n        \n        showErrorMsg('ðŸ™ˆ', '', 'Your web browser does not support core audio player features.<br><a href=\"http://outdatedbrowser.com/en\" target=\"_blank\">Please update your web browser.</a>');\n        return;\n        \n    }\n    \n    if ( hasAppearanceIusses() ) {\n        \n        showWarningMsg( 'For better viewing, try a different web browser.' );\n        \n    }\n    \n    let trackTitle = document.querySelector( el.trackTitle );\n    let expandTracksBtn = document.querySelector( el.expandTracksBtn );\n    \n    marqueeEl( trackTitle );\n    \n    expandTracksBtn.addEventListener( 'click', function() {\n        \n        let trackList = document.querySelector( el.trackList );\n        let minDisplay = document.querySelector( el.miniDisplay );\n        \n        if ( trackList.style.display == 'none' || trackList.style.display == '' ) {\n            trackList.style.display = 'block';\n            minDisplay.style.display = 'none';\n            expandTracksBtn.parentNode.classList.add( 'slideDown' );\n            expandTracksBtn.parentNode.classList.remove( 'slideUp' );\n            expandTracksBtn.classList.add( 'rotate' );\n        } else {\n            trackList.style.display = 'none';\n            minDisplay.style.display = 'flex';\n            expandTracksBtn.parentNode.classList.add( 'slideUp' );\n            expandTracksBtn.parentNode.classList.remove( 'slideDown' );\n            expandTracksBtn.classList.remove( 'rotate' );\n        }\n        \n    } );\n    \n}\n\nfunction hasCoreFeaturesSupport() {\n    \n    if ( !Modernizr.audio && Modernizr.json && Modernizr.svg\n         && Modernizr.csscalc && Modernizr.flexbox ) {\n        return true;\n    }\n    \n    return false;\n    \n}\n\nfunction hasAppearanceIusses() {\n    \n    if ( !Modernizr.canvas ) {\n        return true;\n    }\n    \n    if ( !Modernizr.cssanimations ) {\n        return true;\n    }\n    \n    if ( !Modernizr.bgsizecover ) {\n        return true\n    }\n    \n    if ( !Modernizr.objectfit ) {\n        return true\n    }\n    \n    return false;\n    \n}\n\nfunction marqueeEl( el ) {\n    \n    if ( el.offsetWidth < el.scrollWidth ) {\n        \n        let runTime = 15500;\n        let startTime = 5000;\n        \n        let start = window.setInterval( function() {\n            \n            el.parentNode.classList.add( 'marquee' );\n            \n            el.style.width = el.scrollWidth + 'px';\n            el.classList.remove( 'fadeIn' );\n            \n            window.clearInterval( start );\n            \n            let stop = window.setTimeout( function() {\n                \n                el.style.width = 'initial';\n                el.classList.add( 'fadeIn' );\n                \n                el.parentNode.classList.remove( 'marquee' );\n                window.clearTimeout( stop );\n                marqueeEl( el );\n                \n            }, runTime );\n            \n        }, startTime );\n        \n    }\n    \n}\n\nfunction showWarningMsg( str ) {\n    \n    let warningMsg = document.querySelector( el.warningMsg );\n    let hideTime = 6000;\n    let delayTime = 1000;\n    \n    warningMsg.innerHTML = str;\n    warningMsg.style.display = 'block';\n    warningMsg.classList.add( 'fadeIn' );\n    \n    window.setTimeout( function() {\n        \n        warningMsg.classList.remove( 'fadeIn' );\n        warningMsg.classList.add( 'fadeOut' );\n        \n        window.setTimeout( function() {\n            \n            warningMsg.style.display = 'none';\n            warningMsg.innerHTML = '';\n            \n        }, delayTime );\n        \n    }, hideTime );\n    \n}\n\nfunction showErrorMsg( iconStr, titleStr, bodyStr ) {\n    \n    let splash = document.querySelector( el.splash );\n    let main = document.querySelector( el.main );\n    let errorMsg = document.querySelector( el.errorMsg );\n    let icon = errorMsg.querySelector( '.icon' );\n    let title = errorMsg.querySelector( '.title' );\n    let body = errorMsg.querySelector( '.body' );\n    \n    icon.innerHTML = iconStr;\n    title.innerHTML = titleStr;\n    body.innerHTML = bodyStr;\n    \n    splash.style.display = 'none';\n    main.style.display = 'none';\n    \n    errorMsg.style.display = 'flex';\n    errorMsg.classList.add( 'fadeIn' );\n    \n}"]}