{"version":3,"sources":["../../../source/scripts/audio-dev.js"],"names":["initAP","hasCoreFeaturesSupport","showErrorMsg","hasAppearanceIusses","showWarningMsg","marqueeEl","document","querySelector","el","trackTitle","Modernizr","audio","json","svg","csscalc","flexbox","canvas","cssanimations","bgsizecover","objectfit","offsetWidth","scrollWidth","runTime","startTime","start","window","setInterval","parentNode","classList","add","style","width","remove","clearInterval","stop","setTimeout","clearTimeout","str","warningMsg","hideTime","delayTime","innerHTML","display","iconStr","titleStr","bodyStr","splash","main","errorMsg","icon","title","body","ready","fn","attachEvent","readyState","addEventListener"],"mappings":"YAoCA,SAASA,UAEL,GAAKC,yBAGD,WADAC,cAAa,KAAM,GAAI,+JAKtBC,wBAEDC,eAAgB,oDAMpBC,UAFiBC,SAASC,cAAeC,GAAGC,aAMhD,QAASR,0BAEL,UAAMS,UAAUC,OAASD,UAAUE,MAAQF,UAAUG,KAC7CH,UAAUI,SAAWJ,UAAUK,SAQ3C,QAASZ,uBAEL,OAAMO,UAAUM,UAIVN,UAAUO,iBAIVP,UAAUQ,cAIVR,UAAUS,YAQpB,QAASd,WAAWG,GAEhB,GAAKA,EAAGY,YAAcZ,EAAGa,YAErB,GAAIC,GAAU,MACVC,EAAY,IAEZC,EAAQC,OAAOC,YAAa,WAE5BlB,EAAGmB,WAAWC,UAAUC,IAAK,WAE7BrB,EAAGsB,MAAMC,MAAQvB,EAAGa,YAAc,KAClCb,EAAGoB,UAAUI,OAAQ,UAErBP,OAAOQ,cAAeT,EAEtB,IAAIU,GAAOT,OAAOU,WAAY,WAE1B3B,EAAGsB,MAAMC,MAAQ,UACjBvB,EAAGoB,UAAUC,IAAK,UAElBrB,EAAGmB,WAAWC,UAAUI,OAAQ,WAChCP,OAAOW,aAAcF,GACrB7B,UAAWG,IAnBL,QACE,KA4BxB,QAASJ,gBAAgBiC,GAErB,GAAIC,GAAahC,SAASC,cAAeC,GAAG8B,YACxCC,EAAW,IACXC,EAAY,GAEhBF,GAAWG,UAAYJ,EACvBC,EAAWR,MAAMY,QAAU,QAC3BJ,EAAWV,UAAUC,IAAK,UAE1BJ,OAAOU,WAAY,WAEfG,EAAWV,UAAUI,OAAQ,UAC7BM,EAAWV,UAAUC,IAAK,WAE1BJ,OAAOU,WAAY,WAEfG,EAAWR,MAAMY,QAAU,OAC3BJ,EAAWG,UAAY,IAdf,MADD,KAuBnB,QAASvC,cAAcyC,EAASC,EAAUC,GAEtC,GAAIC,GAASxC,SAASC,cAAeC,GAAGsC,QACpCC,EAAOzC,SAASC,cAAeC,GAAGuC,MAClCC,EAAW1C,SAASC,cAAeC,GAAGwC,UACtCC,EAAOD,EAASzC,cAAe,SAC/B2C,EAAQF,EAASzC,cAAe,UAChC4C,EAAOH,EAASzC,cAAe,QAEnC0C,GAAKR,UAAYE,EACjBO,EAAMT,UAAYG,EAClBO,EAAKV,UAAYI,EAEjBC,EAAOhB,MAAMY,QAAU,OACvBK,EAAKjB,MAAMY,QAAU,OAErBM,EAASlB,MAAMY,QAAU,OACzBM,EAASpB,UAAUC,IAAK;;;;;;;;;;;CAxJ5B,QAAWuB,GAAOC,IAET/C,SAASgD,YAAsC,aAAxBhD,SAASiD,WAAoD,YAAxBjD,SAASiD,YAEtEF,IAIA/C,SAASkD,iBAAkB,mBAAoBH,IAIlDrD,OAEL,IAAIQ,KACAsC,OAAQ,aACRC,KAAM,WACNtC,WAAY,oCACZ6B,WAAY,qBACZU,SAAU","file":"audio.js","sourcesContent":["/*\n * Audio Player\n *\n * @author: Ethan Lin\n * @url: https://github.com/oel-mediateam/audioplayer\n * @version: 2.0.0\n *\n * @license: The MIT License (MIT)\n * Copyright (c) 2014 - 2018 Media Serivces\n *\n */\n \n /**** ON DOM READY ****/\n\n( function ready( fn ) {\n    \n    if ( document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading' ) {\n        \n        fn();\n        \n    } else {\n        \n        document.addEventListener( 'DOMContentLoaded', fn );\n        \n    }\n    \n} )( initAP );\n\nlet el = {\n    splash: '#ap-splash',\n    main: '#ap-main',\n    trackTitle: '.track-info .title-wrapper .title',\n    warningMsg: '.body .warning-msg',\n    errorMsg: '#ap-error'\n}\n\nfunction initAP() {\n    \n    if ( hasCoreFeaturesSupport() ) {\n        \n        showErrorMsg('ðŸ™ˆ', '', 'Your web browser does not support core audio player features.<br><a href=\"http://outdatedbrowser.com/en\" target=\"_blank\">Please update your web browser.</a>');\n        return;\n        \n    }\n    \n    if ( hasAppearanceIusses() ) {\n        \n        showWarningMsg( 'For better viewing, try a different web browser.' );\n        \n    }\n    \n    let trackTitle = document.querySelector( el.trackTitle );\n    \n    marqueeEl( trackTitle );\n    \n}\n\nfunction hasCoreFeaturesSupport() {\n    \n    if ( !Modernizr.audio && Modernizr.json && Modernizr.svg\n         && Modernizr.csscalc && Modernizr.flexbox ) {\n        return true;\n    }\n    \n    return false;\n    \n}\n\nfunction hasAppearanceIusses() {\n    \n    if ( !Modernizr.canvas ) {\n        return true;\n    }\n    \n    if ( !Modernizr.cssanimations ) {\n        return true;\n    }\n    \n    if ( !Modernizr.bgsizecover ) {\n        return true\n    }\n    \n    if ( !Modernizr.objectfit ) {\n        return true\n    }\n    \n    return false;\n    \n}\n\nfunction marqueeEl( el ) {\n    \n    if ( el.offsetWidth < el.scrollWidth ) {\n        \n        let runTime = 15500;\n        let startTime = 5000;\n        \n        let start = window.setInterval( function() {\n            \n            el.parentNode.classList.add( 'marquee' );\n            \n            el.style.width = el.scrollWidth + 'px';\n            el.classList.remove( 'fadeIn' );\n            \n            window.clearInterval( start );\n            \n            let stop = window.setTimeout( function() {\n                \n                el.style.width = 'initial';\n                el.classList.add( 'fadeIn' );\n                \n                el.parentNode.classList.remove( 'marquee' );\n                window.clearTimeout( stop );\n                marqueeEl( el );\n                \n            }, runTime );\n            \n        }, startTime );\n        \n    }\n    \n}\n\nfunction showWarningMsg( str ) {\n    \n    let warningMsg = document.querySelector( el.warningMsg );\n    let hideTime = 6000;\n    let delayTime = 1000;\n    \n    warningMsg.innerHTML = str;\n    warningMsg.style.display = 'block';\n    warningMsg.classList.add( 'fadeIn' );\n    \n    window.setTimeout( function() {\n        \n        warningMsg.classList.remove( 'fadeIn' );\n        warningMsg.classList.add( 'fadeOut' );\n        \n        window.setTimeout( function() {\n            \n            warningMsg.style.display = 'none';\n            warningMsg.innerHTML = '';\n            \n        }, delayTime );\n        \n    }, hideTime );\n    \n}\n\nfunction showErrorMsg( iconStr, titleStr, bodyStr ) {\n    \n    let splash = document.querySelector( el.splash );\n    let main = document.querySelector( el.main );\n    let errorMsg = document.querySelector( el.errorMsg );\n    let icon = errorMsg.querySelector( '.icon' );\n    let title = errorMsg.querySelector( '.title' );\n    let body = errorMsg.querySelector( '.body' );\n    \n    icon.innerHTML = iconStr;\n    title.innerHTML = titleStr;\n    body.innerHTML = bodyStr;\n    \n    splash.style.display = 'none';\n    main.style.display = 'none';\n    \n    errorMsg.style.display = 'flex';\n    errorMsg.classList.add( 'fadeIn' );\n    \n}"]}