{"version":3,"sources":["../../../source/scripts/audio-dev.js"],"names":["initAP","hasCoreFeaturesSupport","showError","hasAppearanceIusses","showWarning","trackTitle","document","querySelector","el","expandTracksBtn","marqueeEl","addEventListener","trackList","minDisplay","miniDisplay","style","display","parentNode","classList","add","remove","evt","errorDisplay","error","hideError","preventDefault","splash","contains","hideSplash","Modernizr","audio","json","svg","csscalc","flexbox","canvas","cssanimations","bgsizecover","objectfit","offsetWidth","scrollWidth","runTime","startTime","start","window","setInterval","width","clearInterval","stop","setTimeout","clearTimeout","str","warning","hideTime","delayTime","innerHTML","iconStr","titleStr","bodyStr","main","icon","title","body","ready","fn","attachEvent","readyState","spectrumDisplay","captionDisplay"],"mappings":"YAyCA,SAASA,UAEL,GAAKC,yBAGD,WADAC,WAAU,KAAM,GAAI,+JAKnBC,wBAEDC,YAAa,mDAIjB,IAAIC,GAAaC,SAASC,cAAeC,GAAGH,YACxCI,EAAkBH,SAASC,cAAeC,GAAGC,gBAEjDC,WAAWL,GAEXI,EAAgBE,iBAAkB,QAAS,WAEvC,GAAIC,GAAYN,SAASC,cAAeC,GAAGI,WACvCC,EAAaP,SAASC,cAAeC,GAAGM,YAEZ,SAA3BF,EAAUG,MAAMC,SAAgD,IAA3BJ,EAAUG,MAAMC,SACtDJ,EAAUG,MAAMC,QAAU,QAC1BH,EAAWE,MAAMC,QAAU,OAC3BP,EAAgBQ,WAAWC,UAAUC,IAAK,aAC1CV,EAAgBQ,WAAWC,UAAUE,OAAQ,WAC7CX,EAAgBS,UAAUC,IAAK,YAE/BP,EAAUG,MAAMC,QAAU,OAC1BH,EAAWE,MAAMC,QAAU,OAC3BP,EAAgBQ,WAAWC,UAAUC,IAAK,WAC1CV,EAAgBQ,WAAWC,UAAUE,OAAQ,aAC7CX,EAAgBS,UAAUE,OAAQ,aAO1Bd,SAASC,cAAe,qBAE9BI,iBAAiB,QAAS,SAASU,GAEzC,GAAIC,GAAehB,SAASC,cAAeC,GAAGe,MAEX,KAA9BD,EAAaP,MAAMC,SACU,QAA9BM,EAAaP,MAAMC,QACnBd,UAAU,KAAM,cAAe,sDAE/BsB,YAGJH,EAAII,mBAIYnB,SAASC,cAAe,uBAE9BI,iBAAiB,QAAS,SAASU,GAE7CjB,YAAa,0DAEbiB,EAAII,mBAIWnB,SAASC,cAAe,sBAE9BI,iBAAiB,QAAS,SAASU,GAEvCf,SAASC,cAAeC,GAAGkB,QAASR,UAAUS,SAAU,eACzDrB,SAASC,cAAeC,GAAGkB,QAASR,UAAUE,OAAO,eAErDQ,aAGJP,EAAII,mBAQZ,QAASxB,0BAEL,UAAM4B,UAAUC,OAASD,UAAUE,MAAQF,UAAUG,KAC7CH,UAAUI,SAAWJ,UAAUK,SAQ3C,QAAS/B,uBAEL,OAAM0B,UAAUM,UAIVN,UAAUO,iBAIVP,UAAUQ,cAIVR,UAAUS,YAQpB,QAASV,cAEQtB,SAASC,cAAeC,GAAGkB,QAEjCR,UAAUC,IAAK,eAI1B,QAAST,WAAWF,GAEhB,GAAKA,EAAG+B,YAAc/B,EAAGgC,YAErB,GAAIC,GAAU,MACVC,EAAY,IAEZC,EAAQC,OAAOC,YAAa,WAE5BrC,EAAGS,WAAWC,UAAUC,IAAK,WAE7BX,EAAGO,MAAM+B,MAAQtC,EAAGgC,YAAc,KAClChC,EAAGU,UAAUE,OAAQ,UAErBwB,OAAOG,cAAeJ,EAEtB,IAAIK,GAAOJ,OAAOK,WAAY,WAE1BzC,EAAGO,MAAM+B,MAAQ,UACjBtC,EAAGU,UAAUC,IAAK,UAElBX,EAAGS,WAAWC,UAAUE,OAAQ,WAChCwB,OAAOM,aAAcF,GACrBtC,UAAWF,IAnBL,QACE,KA4BxB,QAASJ,aAAa+C,GAElB,GAAIC,GAAU9C,SAASC,cAAeC,GAAG4C,SACrCC,EAAW,IACXC,EAAY,GAEhBF,GAAQG,UAAYJ,EACpBC,EAAQrC,MAAMC,QAAU,QACxBoC,EAAQlC,UAAUC,IAAK,UAEvByB,OAAOK,WAAY,WAEfG,EAAQlC,UAAUE,OAAQ,UAC1BgC,EAAQlC,UAAUC,IAAK,WAEvByB,OAAOK,WAAY,WAEfG,EAAQrC,MAAMC,QAAU,OACxBoC,EAAQlC,UAAUE,OAAQ,WAC1BgC,EAAQG,UAAY,IAfZ,MADD,KAwBnB,QAASrD,WAAWsD,EAASC,EAAUC,GAEnC,GAAIhC,GAASpB,SAASC,cAAeC,GAAGkB,QACpCiC,EAAOrD,SAASC,cAAeC,GAAGmD,MAClCpC,EAAQjB,SAASC,cAAeC,GAAGe,OACnCqC,EAAOrC,EAAMhB,cAAe,SAC5BsD,EAAQtC,EAAMhB,cAAe,UAC7BuD,EAAOvC,EAAMhB,cAAe,QAEhCqD,GAAKL,UAAYC,EACjBK,EAAMN,UAAYE,EAClBK,EAAKP,UAAYG,EAEjBhC,EAAOX,MAAMC,QAAU,OACvB2C,EAAK5C,MAAMC,QAAU,OAErBO,EAAMR,MAAMC,QAAU,OACtBO,EAAML,UAAUE,OAAQ,WACxBG,EAAML,UAAUC,IAAK,UAIzB,QAASK,aAEL,GAAIE,GAASpB,SAASC,cAAeC,GAAGkB,QACpCiC,EAAOrD,SAASC,cAAeC,GAAGmD,MAClCpC,EAAQjB,SAASC,cAAeC,GAAGe,OACnCqC,EAAOrC,EAAMhB,cAAe,SAC5BsD,EAAQtC,EAAMhB,cAAe,UAC7BuD,EAAOvC,EAAMhB,cAAe,SAC5B+C,EAAY,GAEhB5B,GAAOX,MAAMC,QAAU,GACvB2C,EAAK5C,MAAMC,QAAU,GAErBO,EAAML,UAAUE,OAAQ,UACxBG,EAAML,UAAUC,IAAK,WAErByB,OAAOK,WAAY,WAEf1B,EAAMR,MAAMC,QAAU,OACtB4C,EAAKL,UAAY,GACjBM,EAAMN,UAAY,GAClBO,EAAKP,UAAY,IAbL;;;;;;;;;;;CAtPpB,QAAWQ,GAAOC,IAET1D,SAAS2D,YAAsC,aAAxB3D,SAAS4D,WAAoD,YAAxB5D,SAAS4D,YAEtEF,IAIA1D,SAASK,iBAAkB,mBAAoBqD,IAIlDhE,OAEL,IAAIQ,KACAkB,OAAQ,aACRiC,KAAM,WACNtD,WAAY,oCACZS,YAAa,iCACbF,UAAW,sBACXH,gBAAiB,0BACjB0D,gBAAiB,kBACjBC,eAAgB,iBAChBhB,QAAS,qBACT7B,MAAO","file":"audio.js","sourcesContent":["/*\n * Audio Player\n *\n * @author: Ethan Lin\n * @url: https://github.com/oel-mediateam/audioplayer\n * @version: 2.0.0\n *\n * @license: The MIT License (MIT)\n * Copyright (c) 2014 - 2018 Media Serivces\n *\n */\n \n /**** ON DOM READY ****/\n\n( function ready( fn ) {\n    \n    if ( document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading' ) {\n        \n        fn();\n        \n    } else {\n        \n        document.addEventListener( 'DOMContentLoaded', fn );\n        \n    }\n    \n} )( initAP );\n\nlet el = {\n    splash: '#ap-splash',\n    main: '#ap-main',\n    trackTitle: '.track-info .title-wrapper .title',\n    miniDisplay: '.track-list .minimized-display',\n    trackList: '.track-list .tracks',\n    expandTracksBtn: '.track-list .expand-btn',\n    spectrumDisplay: '.body .spectrum',\n    captionDisplay: '.body .caption',\n    warning: '.body .warning-msg',\n    error: '#ap-error'\n}\n\nfunction initAP() {\n    \n    if ( hasCoreFeaturesSupport() ) {\n        \n        showError('ðŸ™ˆ', '', 'Your web browser does not support core audio player features.<br><a href=\"http://outdatedbrowser.com/en\" target=\"_blank\">Please update your web browser.</a>');\n        return;\n        \n    }\n    \n    if ( hasAppearanceIusses() ) {\n        \n        showWarning( 'For better viewing, try a different web browser.' );\n        \n    }\n    \n    let trackTitle = document.querySelector( el.trackTitle );\n    let expandTracksBtn = document.querySelector( el.expandTracksBtn );\n    \n    marqueeEl( trackTitle );\n    \n    expandTracksBtn.addEventListener( 'click', function() {\n        \n        let trackList = document.querySelector( el.trackList );\n        let minDisplay = document.querySelector( el.miniDisplay );\n        \n        if ( trackList.style.display == 'none' || trackList.style.display == '' ) {\n            trackList.style.display = 'block';\n            minDisplay.style.display = 'none';\n            expandTracksBtn.parentNode.classList.add( 'slideDown' );\n            expandTracksBtn.parentNode.classList.remove( 'slideUp' );\n            expandTracksBtn.classList.add( 'rotate' );\n        } else {\n            trackList.style.display = 'none';\n            minDisplay.style.display = 'flex';\n            expandTracksBtn.parentNode.classList.add( 'slideUp' );\n            expandTracksBtn.parentNode.classList.remove( 'slideDown' );\n            expandTracksBtn.classList.remove( 'rotate' );\n        }\n        \n    } );\n    \n    /************** DEV ONLY ********************/\n    \n    let errToggle = document.querySelector( '#dev-error-toggle' );\n    \n    errToggle.addEventListener('click', function(evt) {\n        \n        let errorDisplay = document.querySelector( el.error );\n        \n        if ( errorDisplay.style.display == '' || \n            errorDisplay.style.display == 'none' ) {\n            showError('ðŸ‘¾', 'Error Title', 'Error message goes here with <a href=\"#\">link</a>.');      \n        } else {\n            hideError();\n        }\n        \n        evt.preventDefault();\n        \n    } );\n    \n    let warningToggle = document.querySelector( '#dev-warning-toggle' );\n    \n    warningToggle.addEventListener('click', function(evt) {\n        \n        showWarning( 'This is a warning messages. Will disappear on its own.' );\n        \n        evt.preventDefault();\n        \n    } );\n    \n    let splashToggle = document.querySelector( '#dev-splash-toggle' );\n    \n    splashToggle.addEventListener('click', function(evt) {\n        \n        if ( document.querySelector( el.splash ).classList.contains( 'hide-splash' ) ) {\n            document.querySelector( el.splash ).classList.remove('hide-splash');\n        } else {\n            hideSplash();\n        }\n        \n        evt.preventDefault();\n        \n    } );\n    \n    /************** END DEV ONLY ********************/\n    \n}\n\nfunction hasCoreFeaturesSupport() {\n    \n    if ( !Modernizr.audio && Modernizr.json && Modernizr.svg\n         && Modernizr.csscalc && Modernizr.flexbox ) {\n        return true;\n    }\n    \n    return false;\n    \n}\n\nfunction hasAppearanceIusses() {\n    \n    if ( !Modernizr.canvas ) {\n        return true;\n    }\n    \n    if ( !Modernizr.cssanimations ) {\n        return true;\n    }\n    \n    if ( !Modernizr.bgsizecover ) {\n        return true\n    }\n    \n    if ( !Modernizr.objectfit ) {\n        return true\n    }\n    \n    return false;\n    \n}\n\nfunction hideSplash() {\n    \n    let splash = document.querySelector( el.splash );\n    \n    splash.classList.add( 'hide-splash' );\n    \n}\n\nfunction marqueeEl( el ) {\n    \n    if ( el.offsetWidth < el.scrollWidth ) {\n        \n        let runTime = 15500;\n        let startTime = 5000;\n        \n        let start = window.setInterval( function() {\n            \n            el.parentNode.classList.add( 'marquee' );\n            \n            el.style.width = el.scrollWidth + 'px';\n            el.classList.remove( 'fadeIn' );\n            \n            window.clearInterval( start );\n            \n            let stop = window.setTimeout( function() {\n                \n                el.style.width = 'initial';\n                el.classList.add( 'fadeIn' );\n                \n                el.parentNode.classList.remove( 'marquee' );\n                window.clearTimeout( stop );\n                marqueeEl( el );\n                \n            }, runTime );\n            \n        }, startTime );\n        \n    }\n    \n}\n\nfunction showWarning( str ) {\n    \n    let warning = document.querySelector( el.warning );\n    let hideTime = 6000;\n    let delayTime = 1000;\n    \n    warning.innerHTML = str;\n    warning.style.display = 'block';\n    warning.classList.add( 'fadeIn' );\n    \n    window.setTimeout( function() {\n        \n        warning.classList.remove( 'fadeIn' );\n        warning.classList.add( 'fadeOut' );\n        \n        window.setTimeout( function() {\n            \n            warning.style.display = 'none';\n            warning.classList.remove( 'fadeOut' );\n            warning.innerHTML = '';\n            \n        }, delayTime );\n        \n    }, hideTime );\n    \n}\n\nfunction showError( iconStr, titleStr, bodyStr ) {\n    \n    let splash = document.querySelector( el.splash );\n    let main = document.querySelector( el.main );\n    let error = document.querySelector( el.error );\n    let icon = error.querySelector( '.icon' );\n    let title = error.querySelector( '.title' );\n    let body = error.querySelector( '.body' );\n    \n    icon.innerHTML = iconStr;\n    title.innerHTML = titleStr;\n    body.innerHTML = bodyStr;\n    \n    splash.style.display = 'none';\n    main.style.display = 'none';\n    \n    error.style.display = 'flex';\n    error.classList.remove( 'fadeOut' );\n    error.classList.add( 'fadeIn' );\n    \n}\n\nfunction hideError() {\n    \n    let splash = document.querySelector( el.splash );\n    let main = document.querySelector( el.main );\n    let error = document.querySelector( el.error );\n    let icon = error.querySelector( '.icon' );\n    let title = error.querySelector( '.title' );\n    let body = error.querySelector( '.body' );\n    let delayTime = 1000;\n    \n    splash.style.display = '';\n    main.style.display = '';\n    \n    error.classList.remove( 'fadeIn' );\n    error.classList.add( 'fadeOut' );\n    \n    window.setTimeout( function() {\n            \n        error.style.display = 'none';\n        icon.innerHTML = '';\n        title.innerHTML = '';\n        body.innerHTML = '';\n        \n    }, delayTime );\n    \n}\n"]}