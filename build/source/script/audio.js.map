{"version":3,"sources":["../../../source/scripts/audio-dev.js"],"names":["APlayer","_classCallCheck","this","el","splash","main","trackTitle","miniDisplay","trackList","expandTracksBtn","spectrumDisplay","captionDisplay","warning","error","errorIcon","errorTitle","errorBody","self","hasCoreFeaturesSupport","showError","hasAppearanceIusses","showWarning","document","querySelector","_marqueeEl","addEventListener","minDisplay","style","display","parentNode","classList","add","remove","evt","errorDisplay","icon","title","body","_fadeOut","window","setTimeout","innerHTML","preventDefault","contains","hideSplash","Modernizr","audio","json","svg","csscalc","flexbox","canvas","cssanimations","bgsizecover","objectfit","iconStr","titleStr","bodyStr","_fadeIn","str","hideTime","delayTime","offsetWidth","scrollWidth","runTime","startTime","start","setInterval","width","clearInterval","stop","clearTimeout","_clearFade","AP","ready","fn","attachEvent","readyState","go"],"mappings":"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","file":"audio.js","sourcesContent":["/*\n * Audio Player\n *\n * @author: Ethan Lin\n * @url: https://github.com/oel-mediateam/audioplayer\n * @version: 2.0.0\n *\n * @license: The MIT License (MIT)\n * Copyright (c) 2014 - 2018 Media Serivces\n *\n */\n\n'use strict';\n\nclass APlayer {\n    \n    constructor() {\n        \n        this.el = {\n            splash: '#ap-splash',\n            main: '#ap-main',\n            trackTitle: '.track-info .title-wrapper .title',\n            miniDisplay: '.track-list .minimized-display',\n            trackList: '.track-list .tracks',\n            expandTracksBtn: '.track-list .expand-btn',\n            spectrumDisplay: '.body .spectrum',\n            captionDisplay: '.body .caption',\n            warning: '.body .warning-msg',\n            error: '#ap-error',\n            errorIcon: '#ap-error .icon',\n            errorTitle: '#ap-error .title',\n            errorBody: '#ap-error .body'\n        }\n        \n    }\n         \n    go() {\n        \n        let self = this;\n        \n        if ( self.hasCoreFeaturesSupport() ) {\n        \n            self.showError('ðŸ™ˆ', '', 'Your web browser does not support core audio player features.<br><a href=\"http://outdatedbrowser.com/en\" target=\"_blank\">Please update your web browser.</a>');\n            return;\n            \n        }\n        \n        if ( self.hasAppearanceIusses() ) {\n        \n            self.showWarning( 'For better viewing, try a different web browser.' );\n            \n        }\n        \n        let trackTitle = document.querySelector( this.el.trackTitle );\n        let expandTracksBtn = document.querySelector( this.el.expandTracksBtn );\n        \n        self._marqueeEl( trackTitle );\n        \n        expandTracksBtn.addEventListener( 'click', function() {\n            \n            let trackList = document.querySelector( self.el.trackList );\n            let minDisplay = document.querySelector( self.el.miniDisplay );\n            \n            if ( trackList.style.display == 'none' || trackList.style.display == '' ) {\n                trackList.style.display = 'block';\n                minDisplay.style.display = 'none';\n                expandTracksBtn.parentNode.classList.add( 'slideDown' );\n                expandTracksBtn.parentNode.classList.remove( 'slideUp' );\n                expandTracksBtn.classList.add( 'rotate' );\n            } else {\n                trackList.style.display = 'none';\n                minDisplay.style.display = 'flex';\n                expandTracksBtn.parentNode.classList.add( 'slideUp' );\n                expandTracksBtn.parentNode.classList.remove( 'slideDown' );\n                expandTracksBtn.classList.remove( 'rotate' );\n            }\n            \n        } );\n        \n        /************** DEV ONLY ********************/\n        \n        let errToggle = document.querySelector( '#dev-error-toggle' );\n        \n        errToggle.addEventListener('click', function(evt) {\n            \n            let errorDisplay = document.querySelector( self.el.error );\n            \n            if ( errorDisplay.style.display == '' || \n                errorDisplay.style.display == 'none' ) {\n                self.showError('ðŸ‘¾', 'Error Title', 'Error message goes here with <a href=\"#\">link</a>.');      \n            } else {\n                let splash = document.querySelector( self.el.splash );\n                let main = document.querySelector( self.el.main );\n                let icon = document.querySelector( self.el.errorIcon );\n                let title = document.querySelector( self.el.errorTitle );\n                let body = document.querySelector( self.el.errorBody );\n                \n                splash.style.display = '';\n                main.style.display = '';\n                \n                self._fadeOut( errorDisplay );\n                \n                window.setTimeout( function() {\n                    \n                    icon.innerHTML = '';\n                    title.innerHTML = '';\n                    body.innerHTML = '';\n                    \n                }, 1000 );\n            }\n            \n            evt.preventDefault();\n            \n        } );\n        \n        let warningToggle = document.querySelector( '#dev-warning-toggle' );\n        \n        warningToggle.addEventListener('click', function(evt) {\n            \n            self.showWarning( 'This is a warning message. Will disappear on its own.' );\n            \n            evt.preventDefault();\n            \n        } );\n        \n        let splashToggle = document.querySelector( '#dev-splash-toggle' );\n        \n        splashToggle.addEventListener('click', function(evt) {\n            \n            if ( document.querySelector( self.el.splash ).classList.contains( 'hide-splash' ) ) {\n                document.querySelector( self.el.splash ).classList.remove('hide-splash');\n            } else {\n                self.hideSplash();\n            }\n            \n            evt.preventDefault();\n            \n        } );\n        \n        /************** END DEV ONLY ********************/\n        \n    }\n    \n    hasCoreFeaturesSupport() {\n    \n        if ( !Modernizr.audio && Modernizr.json && Modernizr.svg\n             && Modernizr.csscalc && Modernizr.flexbox ) {\n            return true;\n        }\n        \n        return false;\n        \n    }\n    \n    hasAppearanceIusses() {\n    \n        if ( !Modernizr.canvas ) {\n            return true;\n        }\n        \n        if ( !Modernizr.cssanimations ) {\n            return true;\n        }\n        \n        if ( !Modernizr.bgsizecover ) {\n            return true\n        }\n        \n        if ( !Modernizr.objectfit ) {\n            return true\n        }\n        \n        return false;\n        \n    }\n    \n    showError( iconStr, titleStr, bodyStr ) {\n    \n        let splash = document.querySelector( this.el.splash );\n        let main = document.querySelector( this.el.main );\n        let error = document.querySelector( this.el.error );\n        let icon = document.querySelector( this.el.errorIcon );\n        let title = document.querySelector( this.el.errorTitle );\n        let body = document.querySelector( this.el.errorBody );\n        \n        icon.innerHTML = iconStr;\n        title.innerHTML = titleStr;\n        body.innerHTML = bodyStr;\n        \n        splash.style.display = 'none';\n        main.style.display = 'none';\n        \n        error.style.display = 'flex';\n        \n        this._fadeIn( error );\n        \n    }\n    \n    showWarning( str ) {\n    \n        let self = this;\n        let warning = document.querySelector( this.el.warning );\n        let hideTime = 6000;\n        let delayTime = 1000;\n        \n        warning.innerHTML = str;\n        warning.style.display = 'block';\n        \n        self._fadeIn( warning );\n        \n        window.setTimeout( function() {\n            \n            self._fadeOut( warning );\n            \n            window.setTimeout( function() {\n                \n                warning.innerHTML = '';\n                \n            }, delayTime );\n            \n        }, hideTime );\n        \n    }\n    \n    hideSplash() {\n    \n        let splash = document.querySelector( this.el.splash );\n        \n        splash.classList.add( 'hide-splash' );\n        \n    }\n    \n    /*** ANIMATION METHODS ***/\n    \n    _marqueeEl( el ) {\n        \n        let self = this;\n        \n        if ( el.offsetWidth < el.scrollWidth ) {\n            \n            let runTime = 15500;\n            let startTime = 5000;\n            \n            let start = window.setInterval( function() {\n                \n                el.parentNode.classList.add( 'marquee' );\n                \n                el.style.width = el.scrollWidth + 'px';\n                \n                window.clearInterval( start );\n                \n                let stop = window.setTimeout( function() {\n                    \n                    el.style.width = 'initial';\n                    \n                    self._fadeIn( el );\n                    \n                    el.parentNode.classList.remove( 'marquee' );\n                    window.clearTimeout( stop );\n                    self._marqueeEl( el );\n                    \n                }, runTime );\n                \n            }, startTime );\n            \n        }\n        \n    }\n    \n    _fadeIn( el ) {\n        \n        el.classList.remove( 'fadeOut' );\n        el.classList.add( 'fadeIn' );\n        this._clearFade( el );\n        \n    }\n    \n    _fadeOut( el ) {\n        \n        el.classList.remove( 'fadeIn' );\n        el.classList.add( 'fadeOut' );\n        \n        window.setTimeout( function() {\n                \n            el.style.display = 'none';\n            \n        }, 1000 );\n        \n        this._clearFade( el );\n    }\n    \n    _clearFade( el ) {\n        \n        window.setTimeout( function() {\n            \n            el.classList.remove( 'fadeIn' );\n            el.classList.remove( 'fadeOut' );\n            \n        }, 1000 );\n        \n    }\n    \n} // end APlayer class\n\nlet AP = null;\n\n/**** ON DOM READY ****/\n( function ready( fn ) {\n    \n    if ( document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading' ) {\n        \n        fn();\n        \n    } else {\n        \n        document.addEventListener( 'DOMContentLoaded', fn );\n        \n    }\n    \n} )( function() {\n    \n    AP = new APlayer();\n    AP.go();\n    \n} );\n"]}